{% extends 'base/base.html' %}

{% block content %}

{% if user == work.worker %}
    {% if not work.is_featured and user == work.worker %}
        <div class="flex justify-end mb-6">
            <a href="{% url 'service:initiate_payment' work.id %}" class="px-4 py-2 bg-green-500 hover:bg-green-600 text-xl text-white font-semibold rounded-lg">Become Featured</a>
        </div>
    {% endif %}
{% endif %}

<div class="px-10 py-8 bg-gray-100 rounded-lg">
    {% if messages %}
        <div class="mb-4">
            {% for message in messages %}
                <div class="px-4 py-2 rounded mb-2
                {% if message.tags == 'success' %}bg-green-100 text-green-800{% endif %}
                {% if message.tags == 'error' %}bg-red-100 text-red-800{% endif %}
                {% if message.tags == 'info' %}bg-blue-100 text-blue-800{% endif %}">
                {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
    
    <div class="p-6 border border-gray-200 bg-white rounded-lg shadow-sm mb-6">
        <div class="flex justify-between items-start gap-6">
            <div class="flex items-center gap-6">
                {% if work.profile_pic %}
                    <img src="{{ work.profile_pic.url }}" alt="profile-picture" class="rounded-full object-cover w-36 h-36">
                {% else %}
                    <div class="w-36 h-36 bg-gray-300 rounded-full"></div>
                {% endif %}
                <div class="flex flex-col">
                    <h1 class="text-2xl font-bold text-gray-800 mb-2">{{ work.work_title }}</h1>
                    <p class="text-gray-700 font-medium">Provided by: {{ work.worker }}</p>
                    <p class="text-gray-700 font-medium">Category: {{ work.category }}</p>
                </div>
            </div>
            <div class="flex flex-col items-end gap-4">
                <p class="text-xl font-bold text-gray-800">${{ work.price }}</p>

                {% if user == work.worker %}
                    <div class="flex gap-3">
                        <a href="{% url 'service:edit' work.id %}" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg">Edit</a>
                        <a href="{% url 'service:delete' work.id %}" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg">Delete</a>
                    </div>
                {% else %}
                    <a href="{% url 'chatbox:inbox_detail' work.worker.id %}" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg">Contact Service Provider</a>
                {% endif %}
            </div>
        </div>

        <div class="mt-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-1">About</h3>
            <p class="text-gray-700 leading-relaxed">{{ work.description }}</p>
        </div>
    </div>

</div>
{% endblock %}
