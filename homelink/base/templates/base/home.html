{% extends 'base/base.html' %}

{% block content %}
<div class="flex justify-center mb-6">
    <form method="get" action="{% url 'service:search_query' %}"> 
        <input name="search" type="text" value="{{ search }}" class="w-96 h-10 border border-gray-400 shadow-md px-4" placeholder="Search for services..."> 
        <button class="px-4 py-2 bg-green-400 rounded text-white font-medium hover:cursor-pointer hover:bg-green-300 hover:shadow-md transition-all ease-in">search</button> 
    </form>
    <div class="flex justify-center mb-6 ml-1">
        <a href="{% url 'base:nearby_map' %}" class="px-4 py-2 bg-blue-400 rounded text-white font-medium hover:cursor-pointer hover:bg-blue-300 hover:shadow-md transition-all ease-in">Find Nearby Workers</a>
    </div>
</div>

<div class="px-10 py-8 bg-gray-100 rounded-lg">
    <div class="border">

        <!-- Featured Workers -->
        {% for work in works %}
            {% if work in featured_workers %}
                <h1 class="text-2xl font-bold text-gray-700 mb-4">Featured</h1>
                <div class="flex items-start gap-4 px-6 py-4 border border-gray-200 rounded-lg mb-5">
                    {% if work.profile_pic %}
                        <img src="{{ work.profile_pic.url }}" alt="profile-picture" class="rounded-full object-cover w-40 h-40">
                    {% else %}
                        
                    {% endif %}
                    <div class="flex-1 flex flex-col justify-start gap-2">
                        <h1 class="text-xl text-gray-700 font-bold">{{ work.work_title }}</h1>
                        <p class="text-l text-gray-700 font-semibold">{{ work.description }}</p>
                    </div>
                    <div class="flex flex-col justify-between items-end h-40 gap-2">
                        <p class="text-lg text-gray-700 text-right font-bold">${{ work.price }}</p>
                        <a href="{% url 'service:service_detail' work.id %}" class="px-4 py-2 bg-blue-400 border border-blue-400 text-white rounded-lg">View Detail</a>
                    </div>
                </div>
            {% endif %}
        {% endfor %}

        <!-- Normal Workers -->
        {% for work in works %}
            {% if work not in featured_workers %}
                <div class="flex items-start gap-4 px-6 py-4 border border-gray-200 rounded-lg mb-5">
                    {% if work.profile_pic %}
                        <img src="{{ work.profile_pic.url }}" alt="profile-picture" class="rounded-full object-cover w-40 h-40">
                    {% else %}
                       
                    {% endif %}
                    <div class="flex-1 flex flex-col justify-start gap-2">
                        <h1 class="text-xl text-gray-700 font-bold">{{ work.work_title }}</h1>
                        <p class="text-l text-gray-700 font-semibold">{{ work.description }}</p>
                    </div>
                    <div class="flex flex-col justify-between items-end h-40 gap-2">
                        <p class="text-lg text-gray-700 text-right font-bold">${{ work.price }}</p>
                        <a href="{% url 'service:service_detail' work.id %}" class="px-4 py-2 bg-blue-400 border border-blue-400 text-white rounded-lg">View Detail</a>
                    </div>
                </div>
            {% endif %}
        {% endfor %}

    </div>
</div>
{% endblock %}
